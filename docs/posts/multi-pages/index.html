<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
    <title>From Single to Multiple Pages in SPA :: TW Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Introduction Supporting multiple pages is one of the obstacle I found when using safe stack. I think it might be the nature of single page application. It&rsquo;s like we are trying to fight against simple server side rendering somehome. Anyway, I will try my best to write this post in step by step manners. So everyone will understand.
There are quite a few tutorial on adding multi-page support for safe stack platform. Most of them will focus on using propagate message from parent page to child pages.
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="http://localhost:1313/posts/multi-pages/" />





  
  <link rel="stylesheet" href="http://localhost:1313/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/main.min.775ac2af004d44c22a6d000fbd1d9af529642f5cef27399d0280d180af2c2e9b.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="From Single to Multiple Pages in SPA">
<meta property="og:description" content="Introduction Supporting multiple pages is one of the obstacle I found when using safe stack. I think it might be the nature of single page application. It&rsquo;s like we are trying to fight against simple server side rendering somehome. Anyway, I will try my best to write this post in step by step manners. So everyone will understand.
There are quite a few tutorial on adding multi-page support for safe stack platform. Most of them will focus on using propagate message from parent page to child pages.
" />
<meta property="og:url" content="http://localhost:1313/posts/multi-pages/" />
<meta property="og:site_name" content="TW Blog" />

  <meta property="og:image" content="http://localhost:1313/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2022-12-20 14:57:37 &#43;0700 &#43;07" />












</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="http://localhost:1313/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    
    
  </div>
  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="http://localhost:1313/posts/multi-pages/">From Single to Multiple Pages in SPA</a>
  </h1>
  <div class="post-meta"><time class="post-date">2022-12-20</time><span class="post-author">Teerawat Wuttiwat</span></div>

  
  


  

  <div class="post-content"><div>
        <h1 id="introduction">Introduction<a href="#introduction" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Supporting multiple pages is one of the obstacle I found when using safe stack. I think it might be the nature of single page application. It&rsquo;s like we are trying to fight against simple server side rendering somehome. Anyway, I will try my best to write this post in step by step manners. So everyone will understand.</p>
<p>There are quite a few tutorial on adding multi-page support for safe stack platform.
Most of them will focus on using propagate message from parent page to child pages.</p>
<p>After trying with many routes, I decide to go with component styled based on Yobo application.
Each child page will be implemented as React function component. It&rsquo;s the responsibility of the Index page to render the child page component inside it&rsquo;s main view function.</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 160 105"
      >
      <g transform='translate(8,16)'>
<path d='M 0,0 L 96,0' fill='none' stroke='currentColor'></path>
<path d='M 16,32 L 80,32' fill='none' stroke='currentColor'></path>
<path d='M 16,64 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 0,80 L 96,80' fill='none' stroke='currentColor'></path>
<path d='M 0,0 L 0,80' fill='none' stroke='currentColor'></path>
<path d='M 16,32 L 16,64' fill='none' stroke='currentColor'></path>
<path d='M 80,32 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 96,0 L 96,80' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='32' y='20' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='40' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>t</text>
</g>

    </svg>
  
</div>
<p>The Index page will contain navigation bar (navbar) which should be shared across all pages. The Content will be content specific in that page. For example, we can have BoQ page which is a react component hosting BoQItems grid implemented in the past posts.</p>
<p>Without further ado, let&rsquo;s see our plan of attack for this post:</p>
<h1 id="our-plans">Our Plans<a href="#our-plans" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<ol>
<li>Create BoQ Page and Home Page</li>
<li>Modify Index Page to show content of Home Page</li>
<li>Modify Home Page to show list of dummy Projects</li>
<li>Route user from Home Page to BoQ Page when clicking on Project row</li>
</ol>
<h2 id="create-boq-page-and-home-page">Create BoQ Page and Home Page<a href="#create-boq-page-and-home-page" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Start by creating Pages folder inside the src/Client folder and create each Page file as fsharp one.
Do not forget to have the correct order. You can both create fsharp file and order it with Ionide sidebar. Here is what order should be like in Client.fsproj:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span>Compile Include<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Pages</span><span style="color:#960050;background-color:#1e0010">\</span><span style="color:#e6db74">Home.fs&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span>Compile Include<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Pages</span><span style="color:#960050;background-color:#1e0010">\</span><span style="color:#e6db74">BoQ.fs&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span>Compile Include<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Index.fs&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><p>Since both Home and BoQ are needed in Index.fs (for rendering), they must be declare above Index.fs file.</p>
<p>Next, copy content of current Index.fs to BoQ.fs. You can leave the Index.fs blank at the moment. We will re-code them in the next step.</p>
<h2 id="create-blank-home-page">Create Blank Home Page<a href="#create-blank-home-page" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>One of my favourite feature of safe stack is the Hot Module Replacement (HMR). I like to always run the app while coding so I know whenever something wrong happens.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dotnet run
</span></span></code></pre></div><p>Next, we will create simple Index page with no Content in it. Just the blank Bulma container box.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">module</span> Index
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> System
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Elmish
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Fable.Remoting.Client
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Elmish.Toastr
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Shared
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Model</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        PageName <span style="color:#f92672">:</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Msg</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> DoNothing
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> init () <span style="color:#f92672">:</span> Model <span style="color:#f92672">*</span> Cmd<span style="color:#f92672">&lt;</span>Msg<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span> PageName <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Index&#34;</span> <span style="color:#f92672">},</span> Cmd.none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> update <span style="color:#f92672">(</span>msg<span style="color:#f92672">:</span> Msg<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">:</span> Model <span style="color:#f92672">*</span> Cmd<span style="color:#f92672">&lt;</span>Msg<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">match</span> msg <span style="color:#66d9ef">with</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> DoNothing <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#f92672">,</span> Cmd.none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz.Bulma
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> navBrand <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    Bulma.navbarBrand<span style="color:#f92672">.</span>div <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        Bulma.navbarItem<span style="color:#f92672">.</span>a <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            prop<span style="color:#f92672">.</span>href <span style="color:#e6db74">&#34;https://safe-stack.github.io/&#34;</span>
</span></span><span style="display:flex;"><span>            navbarItem<span style="color:#f92672">.</span>isActive
</span></span><span style="display:flex;"><span>            prop<span style="color:#f92672">.</span>children <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                Html.img <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    prop<span style="color:#f92672">.</span>src <span style="color:#e6db74">&#34;/favicon.png&#34;</span>
</span></span><span style="display:flex;"><span>                    prop<span style="color:#f92672">.</span>alt <span style="color:#e6db74">&#34;Logo&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> containerBox <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>dispatch<span style="color:#f92672">:</span> Msg <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">unit</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    Bulma.container []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> view <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>dispatch<span style="color:#f92672">:</span> Msg <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">unit</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    Bulma.hero <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        hero<span style="color:#f92672">.</span>isFullHeight
</span></span><span style="display:flex;"><span>        color<span style="color:#f92672">.</span>isPrimary
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span>style <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            style<span style="color:#f92672">.</span>backgroundSize <span style="color:#e6db74">&#34;cover&#34;</span>
</span></span><span style="display:flex;"><span>            style<span style="color:#f92672">.</span>backgroundImageUrl <span style="color:#e6db74">&#34;https://unsplash.it/1200/900?random&#34;</span>
</span></span><span style="display:flex;"><span>            style<span style="color:#f92672">.</span>backgroundPosition <span style="color:#e6db74">&#34;no-repeat center center fixed&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span>children <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            Bulma.heroHead <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                Bulma.navbar <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    Bulma.container <span style="color:#f92672">[</span> navBrand <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            Bulma.heroBody <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                Bulma.container <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    containerBox model dispatch
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>If you look at the result, you should see just blank page.
Now we will create Home page and put it in the container box.</p>
<figure><img src="/posts/multi-pages/images/blank-index.jpg"
    alt="Blank Index Page" width="600"><figcaption>
      <h4>Blank Index Page</h4>
    </figcaption>
</figure>

<p>Before creating Home page, we need to install one library.
<strong>Feliz.UseElmish</strong> is the package that act as a bridge between Elmish and React.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dotnet paket add Feliz.UseElmish -p Client
</span></span></code></pre></div><p>Go to Home.fs and paste below code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">module</span> Pages.Home
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> System
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Elmish
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Shared
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Model</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        PageName <span style="color:#f92672">:</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Msg</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> DoNothing
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> init () <span style="color:#f92672">:</span> Model <span style="color:#f92672">*</span> Cmd<span style="color:#f92672">&lt;</span>Msg<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            PageName <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Home&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">,</span> Cmd.none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> update <span style="color:#f92672">(</span>msg<span style="color:#f92672">:</span> Msg<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">:</span> Model <span style="color:#f92672">*</span> Cmd<span style="color:#f92672">&lt;</span>Msg<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">match</span> msg <span style="color:#66d9ef">with</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> DoNothing <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#f92672">,</span> Cmd.none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz.UseElmish
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz.Bulma
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> view <span style="color:#f92672">=</span> React.functionComponent<span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> () <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">),</span> dispatch <span style="color:#f92672">=</span> React.useElmish<span style="color:#f92672">(</span>init<span style="color:#f92672">,</span> update<span style="color:#f92672">,</span> <span style="color:#f92672">[|</span> <span style="color:#f92672">|])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Bulma.title model<span style="color:#f92672">.</span>PageName
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>The part I would like you to focus on is the <strong>view</strong> function. The view function will return React function component which will be used as the content in the Index page. The bridge between Elmish and React is on the next line. <strong>React.useElmish</strong> will receive <strong>init</strong> and <strong>update</strong> function as input and return <strong>model</strong> and <strong>dispatch</strong>.</p>
<p>By using the <strong>Feliz.UseElmish</strong> library you can introduce React component into Elmish world.</p>
<p>Back to the view function, for simplicity we will just show the name of the page.</p>
<p>Next go to containerBox function in Index.fs and change it to render Home page by calling <strong>view</strong> function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> containerBox <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>dispatch<span style="color:#f92672">:</span> Msg <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">unit</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    Pages.Home.view()
</span></span></code></pre></div><p>If you look at the browser, you should see &ldquo;Home&rdquo; show in the Index page. This render of <strong>Home</strong> title comes from Home.fs</p>
<figure><img src="/posts/multi-pages/images/blank-home.jpg"
    alt="Blank Home Page" width="600"><figcaption>
      <h4>Blank Home Page</h4>
    </figcaption>
</figure>

<h2 id="show-list-of-projects">Show List of Projects<a href="#show-list-of-projects" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Showing just the page name is not fun. Let&rsquo;s try showing list of projects in the Home page.
First, define ProjectDto and initialise it with some test data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">module</span> Pages.Home
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ProjectDto</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    Id <span style="color:#f92672">:</span> Guid
</span></span><span style="display:flex;"><span>    Name <span style="color:#f92672">:</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    EstimateCost <span style="color:#f92672">:</span> <span style="color:#66d9ef">float</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Model</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        PageName <span style="color:#f92672">:</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>        Projects <span style="color:#f92672">:</span> ProjectDto <span style="color:#66d9ef">list</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> init () <span style="color:#f92672">:</span> Model <span style="color:#f92672">*</span> Cmd<span style="color:#f92672">&lt;</span>Msg<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            PageName <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Home&#34;</span>
</span></span><span style="display:flex;"><span>            Projects <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">_</span> <span style="color:#66d9ef">in</span> 1<span style="color:#f92672">..</span>3 <span style="color:#66d9ef">do</span> <span style="color:#f92672">{</span>Id <span style="color:#f92672">=</span> Guid.NewGuid()<span style="color:#f92672">;</span> Name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Swimming Pool&#34;</span><span style="color:#f92672">;</span> EstimateCost <span style="color:#f92672">=</span> 1500<span style="color:#f92672">.</span>0<span style="color:#f92672">}</span> <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">,</span> Cmd.none
</span></span></code></pre></div><p>Next, create new projectsGrid function to render list of projects from our test data.
You can check how to use grid in previous safe-stack post.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">open</span> Feliz.AgGrid
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> projectsGrid model dispatch <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Html.div <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span>className ThemeClass.Balham
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span>children <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            Bulma.button<span style="color:#f92672">.</span>button <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                color<span style="color:#f92672">.</span>isInfo
</span></span><span style="display:flex;"><span>                prop<span style="color:#f92672">.</span>text <span style="color:#e6db74">&#34;Add&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            AgGrid.grid <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                AgGrid.rowData <span style="color:#f92672">(</span>model<span style="color:#f92672">.</span>Projects <span style="color:#f92672">|&gt;</span> Array.ofList<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                AgGrid.defaultColDef <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    ColumnDef.resizable <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                AgGrid.domLayout AutoHeight
</span></span><span style="display:flex;"><span>                AgGrid.onGridReady <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span>AutoSizeAllColumns()<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                AgGrid.enableCellTextSelection <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                AgGrid.ensureDomOrder <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                AgGrid.columnDefs <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    ColumnDef.create<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">string</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.headerName <span style="color:#e6db74">&#34;Name&#34;</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.valueGetter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span>Name<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                    ColumnDef.create<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.headerName <span style="color:#e6db74">&#34;Estimate Cost&#34;</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.valueGetter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span>EstimateCost<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.width 75
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Finally, let&rsquo;s render the grid in view function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> view <span style="color:#f92672">=</span> React.functionComponent<span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> () <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">),</span> dispatch <span style="color:#f92672">=</span> React.useElmish<span style="color:#f92672">(</span>init<span style="color:#f92672">,</span> update<span style="color:#f92672">,</span> <span style="color:#f92672">[|</span> <span style="color:#f92672">|])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    projectsGrid model dispatch
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>If you look at the browser, you should see list of test projects in Home page.</p>
<figure><img src="/posts/multi-pages/images/projects-grid.jpg"
    alt="Project Grids" width="600"><figcaption>
      <h4>List of Projects</h4>
    </figcaption>
</figure>

<h2 id="route-from-home-page-to-boq-page">Route from Home page to BoQ page<a href="#route-from-home-page-to-boq-page" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>So far so good, we can show child page (Home) inside parent page (Index). But this it rarely useful, we should be able to go between pages.</p>
<p>We are going to use Feliz.Router. Start by installing it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dotnet paket add Feliz.Router -p Client
</span></span></code></pre></div><p>Feliz.Router will take cares of observing Url changes and trigger our supplied function.
Start by creating new function that will render main parent page with supplied child page.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> viewPage <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>dispatch<span style="color:#f92672">:</span> Msg <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">unit</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>pageContent<span style="color:#f92672">:</span>ReactElement<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    Bulma.hero <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        hero<span style="color:#f92672">.</span>isFullHeight
</span></span><span style="display:flex;"><span>        color<span style="color:#f92672">.</span>isDark
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span>children <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            Bulma.heroHead <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                Bulma.navbar <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    Bulma.container <span style="color:#f92672">[</span> navBrand <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            Bulma.heroBody <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                Bulma.container <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                    Bulma.title <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                        text<span style="color:#f92672">.</span>hasTextCentered
</span></span><span style="display:flex;"><span>                        prop<span style="color:#f92672">.</span>text <span style="color:#e6db74">&#34;CoCoTender&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                    pageContent
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Next, change the view function to use Feliz.Router</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> view <span style="color:#f92672">(</span>model<span style="color:#f92672">:</span> Model<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>dispatch<span style="color:#f92672">:</span> Msg <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">unit</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> activePage <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        Pages.Home.view()
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">|&gt;</span> viewPage model dispatch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    React.router <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        router<span style="color:#f92672">.</span>children <span style="color:#f92672">[</span> activePage <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>The Router will render the ReactElement within children. This is not exciting since we will still see only Home page as the content.</p>
<p>Let&rsquo;s introduce Page domain into our app.
What I really like about F# is the way that everthing will be solved by introducing small type suitable for the task. Like this app, we are working on page so it&rsquo;s natural to define Page type for this.</p>
<p>Enough of mumbling. Let&rsquo;s create Router.fs in src/Client. And don&rsquo;t forget to include that file in Client.fsproj. It should comes right after index.html.</p>
<p>We will define Page type in Router module.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Page</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> Home
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> BoQ
</span></span></code></pre></div><p>Since we have only 2 pages at the moment. We will create new choice for Page when new page is created.
Next, go to Index.fs. Since the view function needs to know which is the current page so we can call content view function correctly. We should define the Index model as follow:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Model</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    CurrentPage <span style="color:#f92672">:</span> Page
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Then, go to the init and set Home to be the default page.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> init () <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>        CurrentPage <span style="color:#f92672">=</span> Home
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Next in the view function of Index page, find activePage based on CurrentPage in the model.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> activePage <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">match</span> model<span style="color:#f92672">.</span>CurrentPage <span style="color:#66d9ef">with</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">|</span> Home <span style="color:#f92672">-&gt;</span> Pages.Home.view()
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">|</span> BoQ <span style="color:#f92672">-&gt;</span> Pages.BoQ.view()
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">|&gt;</span> viewPage model dispatch
</span></span></code></pre></div><p>The only things left is to update CurrentPage when url has changes.
We can do that in React.router</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    React.router <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        router<span style="color:#f92672">.</span>onUrlChanged <span style="color:#f92672">(</span>UrlChanged <span style="color:#f92672">&gt;&gt;</span> dispatch<span style="color:#f92672">)</span>        
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>When url changes (such as clicking on the hyperlink), the UrlChanged message will be dispatch with segments of Url. We need to create new Message union.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Msg</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> UrlChanged <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">string</span> <span style="color:#66d9ef">list</span>
</span></span></code></pre></div><p>and add the case for update function</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">match</span> msg <span style="color:#66d9ef">with</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> UrlChanged segments <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> currentPage <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">match</span> segments <span style="color:#66d9ef">with</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">|</span> <span style="color:#f92672">[</span>  <span style="color:#f92672">]</span> <span style="color:#f92672">-&gt;</span> Home
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">|</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;boq&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">-&gt;</span> BoQ
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">|</span> <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span> Home 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span> model <span style="color:#66d9ef">with</span> CurrentPage <span style="color:#f92672">=</span> currentPage <span style="color:#f92672">},</span> Cmd.none
</span></span></code></pre></div><p>This case will check the url segments and set the related Page. The default one will always be Home. We also match &ldquo;boq&rdquo; to BoQ Page.
For example</p>
<ol>
<li>If user browse with http://localhost:8080 -&gt; Home page</li>
<li>If user browse with http://localhost:8080/#/boq -&gt; BoQ page</li>
<li>The rest will always go to Home page</li>
</ol>
<p>To trigger the routing, we will add Edit link in each Project row. The link will have href point to BoQ page.</p>
<p>Go to Home.fs and add more column to projectsGrid</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>                    ColumnDef.create<span style="color:#f92672">&lt;</span>Guid<span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.valueGetter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> x <span style="color:#f92672">-&gt;</span> x<span style="color:#f92672">.</span>Id<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                        ColumnDef.cellRendererFramework <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> id <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>                            Html.a <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>                                prop<span style="color:#f92672">.</span>href <span style="color:#f92672">(</span>Router.format<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;boq&#34;</span><span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>                                prop<span style="color:#f92672">.</span>text <span style="color:#e6db74">&#34;Edit&#34;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>If you click on the Edit link, it will redirect you to BoQ page.
Now try to either</p>
<ol>
<li>Open Edit in new tab</li>
<li>Type the boq url directly in navigation bar</li>
</ol>
<p>In both cases, you will found that the browser will just show home page. The problem arises because the UrlChanged is not triggered when page first load. The only place you could check for initial url is in the init function.</p>
<p>Go to init function and do following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> initUrlCmd <span style="color:#f92672">=</span> Router.currentUrl() <span style="color:#f92672">|&gt;</span> UrlChanged <span style="color:#f92672">|&gt;</span> Cmd.ofMsg
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">,</span> initUrlCmd
</span></span></code></pre></div><p>This will dispatch UrlChanged message with current url from the location bar. Now if you try aboved cases, it should working now.</p>
<p>That&rsquo;s it for today.
You can get the finished version by cloning from my github repo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone -b v0.5.0 https://github.com/twuttiwat/CoCoTender 
</span></span></code></pre></div><p>Thanks for reading!!!</p>

      </div></div>

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span> 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
